(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["MenmorandumListWaitLoad"],{"6e78":function(e,t,a){"use strict";var i=a("c94d"),o=a.n(i);o.a},c94d:function(e,t,a){},e6da:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{"box-sizing":"border-box"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("待备忘信息列表查询")])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"范围选择:"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("el-form-item",{attrs:{label:"备忘名称:"}},[a("el-input",{attrs:{placeholder:"请输入备忘名称"},model:{value:e.searchForm.LikeName,callback:function(t){e.$set(e.searchForm,"LikeName",t)},expression:"searchForm.LikeName"}})],1),a("el-form-item",{attrs:{label:"备忘内容:"}},[a("el-input",{attrs:{placeholder:"请输入备忘内容"},model:{value:e.searchForm.LikeMessage,callback:function(t){e.$set(e.searchForm,"LikeMessage",t)},expression:"searchForm.LikeMessage"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchForm.page=1,e.getData()}}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.goOtherDay("today")}}},[e._v("当天")]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.goOtherDay("two")}}},[e._v("前两天")]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.goOtherDay("week")}}},[e._v("前一周")]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.goOtherDay("month")}}},[e._v("前一月")])],1)],1)],1),a("div",{staticStyle:{height:"20px",width:"100%"}})],1)]),a("el-card",{staticClass:"box-card visible"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("待备忘信息")])]),a("vxe-toolbar",{attrs:{custom:"",print:"",export:""},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.addItem}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.getData}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v(" 刷新 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.deleteItems}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 多选删除 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:function(t){e.isShow=!e.isShow}}},[a("i",{staticClass:"el-icon-search"}),e._v(" 模糊查询 ")])]},proxy:!0}])}),a("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"xTable",attrs:{data:e.tableData,border:"","export-config":e.exportConfig,"element-loading-background":"rgba(0, 0, 0, 0)","edit-config":{trigger:"manual",mode:"row"},resizable:"",align:"center","highlight-hover-row":"","highlight-current-row":""}},[a("vxe-table-column",{attrs:{type:"checkbox",width:"50",fixed:"left"}}),a("vxe-table-column",{attrs:{type:"seq",width:"50",title:"序号",fixed:"left"}}),a("vxe-table-column",{attrs:{field:"Name",title:"名称",sortable:"",width:"180",align:"left","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"MWriteTime",title:"日期",sortable:"",width:"180","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"MExpectedOverTime",title:"预计完成日期","show-overflow":"",sortable:"",width:"180"}}),a("vxe-table-column",{attrs:{field:"MInfo",title:"内容",sortable:"","show-overflow":"",width:"180",align:"left"}}),a("vxe-table-column",{attrs:{field:"MExpectedStutes",title:"是否超时","show-overflow":"",width:"180",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return["无预计"===i.MExpectedStutes?[a("el-tag",{attrs:{type:"info",size:"small"}},[e._v(e._s(i.MExpectedStutes))])]:"已超时"===i.MExpectedStutes?[a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(i.MExpectedStutes))])]:[a("el-tag",{attrs:{type:"success",size:"small"}},[e._v(e._s(i.MExpectedStutes))])]]}}])}),a("vxe-table-column",{attrs:{title:"操作",width:"300",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:function(t){return e.finishedItem(i)}}},[e._v(" 完成 ")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(t){return e.editItem(i)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" 删除 ")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-sizes":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,visible:e.dialogFormVisible,title:"备忘完成"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{"label-width":"90px","label-position":"right",model:e.finishedForm}},[a("el-form-item",{attrs:{label:"完成时间"}},[a("el-input",{attrs:{readonly:""},model:{value:e.finishedForm.Time,callback:function(t){e.$set(e.finishedForm,"Time",t)},expression:"finishedForm.Time"}})],1),a("el-form-item",{attrs:{label:"备忘名称"}},[a("el-input",{attrs:{readonly:""},model:{value:e.finishedForm.Name,callback:function(t){e.$set(e.finishedForm,"Name",t)},expression:"finishedForm.Name"}})],1),a("el-form-item",{attrs:{label:"备忘内容"}},[a("el-input",{attrs:{type:"textarea",readonly:"",autosize:{minRows:4,maxRows:8}},model:{value:e.finishedForm.MInfo,callback:function(t){e.$set(e.finishedForm,"MInfo",t)},expression:"finishedForm.MInfo"}})],1),a("el-form-item",{attrs:{label:"完成内容"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:e.finishedForm.Msg,callback:function(t){e.$set(e.finishedForm,"Msg",t)},expression:"finishedForm.Msg"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.finishedHttp}},[e._v(" 提 交 ")]),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消 ")])],1)],1),a("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,visible:e.dialogFormEditVisible,title:"修改备忘"},on:{"update:visible":function(t){e.dialogFormEditVisible=t}}},[a("el-form",{attrs:{"label-width":"90px","label-position":"right",model:e.editForm}},[a("el-form-item",{attrs:{label:"完成时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editForm.ExpectedOverTime,callback:function(t){e.$set(e.editForm,"ExpectedOverTime",t)},expression:"editForm.ExpectedOverTime"}})],1),a("el-form-item",{attrs:{label:"备忘名称"}},[a("el-input",{model:{value:e.editForm.Name,callback:function(t){e.$set(e.editForm,"Name",t)},expression:"editForm.Name"}})],1),a("el-form-item",{attrs:{label:"备忘内容"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:e.editForm.Msg,callback:function(t){e.$set(e.editForm,"Msg",t)},expression:"editForm.Msg"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.editHttp}},[e._v(" 提 交 ")]),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogFormEditVisible=!1}}},[e._v(" 取 消 ")])],1)],1),a("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,visible:e.dialogFormAddVisible,title:"添加备忘"},on:{"update:visible":function(t){e.dialogFormAddVisible=t}}},[a("el-form",{attrs:{"label-width":"90px","label-position":"right",model:e.addForm}},[a("el-form-item",{attrs:{label:"完成时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.addForm.ExpectedOverTime,callback:function(t){e.$set(e.addForm,"ExpectedOverTime",t)},expression:"addForm.ExpectedOverTime"}})],1),a("el-form-item",{attrs:{label:"备忘名称"}},[a("el-input",{model:{value:e.addForm.Name,callback:function(t){e.$set(e.addForm,"Name",t)},expression:"addForm.Name"}})],1),a("el-form-item",{attrs:{label:"备忘内容"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:e.addForm.Msg,callback:function(t){e.$set(e.addForm,"Msg",t)},expression:"addForm.Msg"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.addHttp}},[e._v(" 提 交 ")]),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogFormAddVisible=!1}}},[e._v(" 取 消 ")])],1)],1)],1)],1)},o=[],s=a("2f62");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=a("c1df"),c={data:function(){return{searchForm:{AutoSystemID:"",Start:"",Stop:"",LikeName:"",LikeMessage:"",page:1,limit:10},tableData:[],count:0,isShow:!0,loading:!1,dialogFormVisible:!1,value:"",finishedForm:{Time:"",AutoSystemID:"",Msg:"",Name:"",SystemID:"",MInfo:""},editForm:{AutoSystemID:"",ExpectedOverTime:"",Msg:"",Name:"",SystemID:""},dialogFormEditVisible:!1,value1:"",selectedItems:[],addForm:{AutoSystemID:"",ExpectedOverTime:"",Msg:"",Name:"",SystemID:""},dialogFormAddVisible:!1,exportConfig:{filename:"export",sheetName:"Sheet1",types:["csv","xlsx"]}}},computed:l({},Object(s["c"])("table",["pageSize"])),created:function(){this.searchForm.AutoSystemID=localStorage.getItem("AutoSystemID"),this.searchForm.limit=this.pageSize[0];var e=m().subtract(0,"days").format("YYYY-MM-DD");this.value=[e,e],this.getData()},methods:{handleSizeChange:function(e){this.searchForm.limit=e,this.getData()},handleCurrentChange:function(e){this.searchForm.page=e,this.getData()},getData:function(){var e=this;this.loading=!0,this.searchForm.Start=m(this.value[0]).format("YYYY-MM-DD"),this.searchForm.Stop=m(this.value[1]).format("YYYY-MM-DD");var t="/api/Memorandum/GetWaitList";this.$axios.get(t,{params:this.searchForm}).then((function(t){0===t.data.code?(e.tableData=t.data.data,e.count=t.data.count,e.loading=!1):1===t.data.code&&(e.$message.error(t.data.msg),e.loading=!1)})).catch((function(e){console.error(e)}))},goOtherDay:function(e){var t;switch(e){case"today":t=m().subtract(0,"days").format("YYYY-MM-DD");break;case"two":t=m().subtract(2,"days").format("YYYY-MM-DD"),console.log(t);break;case"week":t=m().subtract(1,"weeks").format("YYYY-MM-DD");break;case"month":t=m().subtract(1,"months").format("YYYY-MM-DD");break}this.value=[t,new Date]},finishedItem:function(e){console.log(e),this.finishedForm.Time=m(new Date).format("YYYY-MM-DD HH:mm:ss"),this.finishedForm.Name=e.Name,this.finishedForm.SystemID=e.SystemID,this.finishedForm.Msg="",this.finishedForm.MInfo=e.MInfo,this.dialogFormVisible=!0},finishedHttp:function(){var e=this,t={AutoSystemID:this.searchForm.AutoSystemID,SystemID:this.finishedForm.SystemID,Name:this.finishedForm.Name,Msg:this.finishedForm.Msg},a="/api/Memorandum/SetOverInfo";this.$axios.post(a,t).then((function(t){if(0===t.data.code){e.dialogFormVisible=!1,e.$message.success(t.data.msg);var a=Math.ceil((e.count-1)/e.searchForm.limit),i=e.searchForm.page>a?a:e.searchForm.page;e.searchForm.page=i<1?1:i,e.getData()}else 1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))},editItem:function(e){this.editForm.ExpectedOverTime=m().subtract(0,"days").format("YYYY-MM-DD"),this.editForm.AutoSystemID=this.searchForm.AutoSystemID,this.editForm.Name=e.Name,this.editForm.Msg=e.MInfo,this.editForm.SystemID=e.SystemID,this.dialogFormEditVisible=!0},editHttp:function(){var e=this,t="/api/Memorandum/UpdataInfo";this.$axios.post(t,this.editForm).then((function(t){0===t.data.code?(e.dialogFormEditVisible=!1,e.$message.success(t.data.msg),e.getData()):1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))},deleteItem:function(e){var t=this;console.log(e);var a="/api/Memorandum/DeleteInfo",i={AutoSystemID:this.searchForm.AutoSystemID,data:[{SystemID:e.SystemID,Name:e.Name}]};this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post(a,i).then((function(e){if(0===e.data.code){t.$message.success(e.data.msg);var a=Math.ceil((t.count-1)/t.searchForm.limit),i=t.searchForm.page>a?a:t.searchForm.page;t.searchForm.page=i<1?1:i,t.getData()}else 1===e.data.code&&t.$message.error(e.data.msg)})).catch((function(e){console.error(e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},deleteItems:function(){var e=this;this.selectedItems=this.$refs.xTable.getCheckboxRecords();var t=[];if(0===this.selectedItems.length)return this.$message.warning("请选择要删除的用户"),!1;var a=!0,i=!1,o=void 0;try{for(var s,r=this.selectedItems[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var l=s.value;t.push({Name:l.Name,SystemID:l.SystemID})}}catch(n){i=!0,o=n}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a="/api/Memorandum/DeleteInfo";e.$axios.post(a,{AutoSystemID:e.searchForm.AutoSystemID,data:t}).then((function(t){if(0===t.data.code){e.$message.success("删除成功");var a=Math.ceil((e.count-e.selectedItems.length)/e.searchForm.limit),i=e.searchForm.page>a?a:e.searchForm.page;e.searchForm.page=i<1?1:i,e.getData()}else 1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addItem:function(e){this.addForm.AutoSystemID=this.searchForm.AutoSystemID,this.addForm.Name=e.Name,this.addForm.Msg=e.MInfo,this.addForm.SystemID=e.SystemID,this.dialogFormAddVisible=!0},addHttp:function(){var e=this,t="/api/Memorandum/AddInfo";this.$axios.post(t,this.addForm).then((function(t){0===t.data.code?(e.dialogFormAddVisible=!1,e.$message.success(t.data.msg),e.getData()):1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))}}},d=c,u=(a("6e78"),a("2877")),h=Object(u["a"])(d,i,o,!1,null,"061be895",null);t["default"]=h.exports}}]);
//# sourceMappingURL=MenmorandumListWaitLoad.932ddd75.js.map