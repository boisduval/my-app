(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["BatterManageFirstAlarm"],{8215:function(t,e,a){"use strict";var r=a("ccf7"),s=a.n(r);s.a},ccf7:function(t,e,a){},ee85:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("firstAlarm.searchTitle")))])]),a("el-form",{attrs:{"label-width":"80px",inline:!0}},[t._l(t.baseIfo,(function(t,e){return a("el-form-item",{key:e,attrs:{label:t.label}},[a("el-input",{attrs:{value:t.value,readonly:!0}})],1)})),a("el-form-item",{attrs:{label:t.$t("firstAlarm.formLabel")[0]}},[a("el-select",{model:{value:t.bank,callback:function(e){t.bank=e},expression:"bank"}},[a("el-option",{attrs:{label:"Bank1",value:"0"}}),a("el-option",{attrs:{label:"Bank2",value:"1"}})],1)],1)],2)],1),a("el-card",{staticClass:"box-card"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:t.$t("firstAlarm.tabs")[0],name:"firstAlarm"}}),a("el-tab-pane",{attrs:{label:t.$t("firstAlarm.tabs")[1],name:"secondAlarm"}}),a("vxe-toolbar",{attrs:{custom:"",print:"",export:""},scopedSlots:t._u([{key:"buttons",fn:function(){return[a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.getData(t.paramsFA)}}},[a("i",{staticClass:"el-icon-refresh-right"}),t._v(" "+t._s(t.$t("base.searchbtn"))+" ")])]},proxy:!0}])}),a("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"xTable",attrs:{data:t.activeArray,border:"",customs:t.customColumns,"element-loading-background":"rgba(0, 0, 0, 0)",resizable:"","highlight-hover-row":"","highlight-current-row":"",align:"center","seq-config":{seqMethod:t.seqMethod}},on:{"update:customs":function(e){t.customColumns=e}}},[a("vxe-table-column",{attrs:{type:"checkbox",width:"50",fixed:"left",align:"center","show-header-overflow":""}}),a("vxe-table-column",{attrs:{type:"seq",width:"80",title:t.$t("firstAlarm.tableLabel")[0],fixed:"left",align:"center","show-header-overflow":""}}),t._l(t.tableColumn,(function(e,r){return a("vxe-table-column",t._b({key:r,attrs:{"show-header-overflow":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[s[r]?[a("el-tag",{attrs:{type:"warning",size:"small"}},[t._v(t._s(t.$t("firstAlarm.state")[1]))])]:[a("el-tag",{attrs:{type:"success",size:"small"}},[t._v(t._s(t.$t("firstAlarm.state")[0]))])]]}}],null,!0)},"vxe-table-column",e,!1))}))],2)],1)],1)],1)},s=[],i=a("2f62");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c={data:function(){return{baseIfo:[],data:{},activeName:"firstAlarm",bank:"0",bATTERY_FIRST_ALARM_MESSAGE:[],bATTERY_SECONDARY_ALARM_MESSAGE:[],bitInfo:[],loading:!1,api:"/api/Devices/GetRegistrationEquipment",tableColumn:[],activeArray:[],exportConfig:{filename:"export",sheetName:"Sheet1",types:["csv","xlsx"]}}},computed:n({},Object(i["c"])("detail",["paramsFA"])),watch:{paramsFA:{handler:function(t,e){this.data={},this.baseIfo=[],this.getDetail(this.api,this.paramsFA),this.getData(this.paramsFA)},deep:!0},bank:{handler:function(t,e){this.getData(this.paramsFA)}}},mounted:function(){this.paramsFA.AutoSystemID&&this.paramsFA.batterID&&(this.getDetail(this.api,this.paramsFA),this.getData(this.paramsFA),this.activeArray=this.bATTERY_FIRST_ALARM_MESSAGE,this.setData())},methods:{getData:function(t){var e=this,a=localStorage.getItem("AutoSystemID");this.loading=!0;var r="/api/Chart/GetBatteryBankCRITICALStateCharts";this.$axios.get("".concat(r,"?AutoSystemID=").concat(a,"&BatteryIDS=").concat(t.batterID,"&BankIndex=").concat(this.bank)).then((function(t){0===t.data.code?(e.bATTERY_FIRST_ALARM_MESSAGE=t.data.data.bATTERY_FIRST_ALARM_MESSAGE,e.bATTERY_SECONDARY_ALARM_MESSAGE=t.data.data.bATTERY_SECONDARY_ALARM_MESSAGE,e.activeArray=e.bATTERY_FIRST_ALARM_MESSAGE,e.setData()):1===t.data.code?(e.bATTERY_FIRST_ALARM_MESSAGE=[],e.bATTERY_SECONDARY_ALARM_MESSAGE=[],e.activeArray=[],e.$message.error(t.data.msg)):(e.bATTERY_FIRST_ALARM_MESSAGE=[],e.bATTERY_SECONDARY_ALARM_MESSAGE=[],e.activeArray=[]),e.loading=!1})).catch((function(t){console.error(t)}))},getDetail:function(t,e){var a=this;this.$axios.get("".concat(t,"?AutoSystemID=").concat(e.AutoSystemID,"&SystemID=").concat(e.SystemID)).then((function(t){for(var e in a.data=t.data.data,a.data)switch(e){case"DIDS":a.baseIfo.push({label:a.$t("firstAlarm.formLabel")[1],value:a.data[e]});break;case"DICCID":a.baseIfo.push({label:a.$t("firstAlarm.formLabel")[2],value:a.data[e]});break;case"DVIN":a.baseIfo.push({label:a.$t("firstAlarm.formLabel")[3],value:a.data[e]});break;case"DName":a.baseIfo.push({label:a.$t("firstAlarm.formLabel")[4],value:a.data[e]});break}})).catch((function(t){console.error(t)}))},handleClick:function(t,e){console.log(t),"firstAlarm"===t?this.activeArray=this.bATTERY_SECONDARY_ALARM_MESSAGE:"secondAlarm"===t&&(this.activeArray=this.bATTERY_FIRST_ALARM_MESSAGE)},setData:function(){this.bitInfo=this.$t("firstAlarm.tableLabel").slice(1),this.tableColumn=[];for(var t=0;t<16;t++){var e="BATTER_BIT_"+(t+1);this.tableColumn.push({field:e,title:this.bitInfo[t],width:100})}},seqMethod:function(t){var e=t.rowIndex;return"第"+(e+1)+"簇"}}},b=c,u=(a("8215"),a("2877")),A=Object(u["a"])(b,r,s,!1,null,"6a30d19e",null);e["default"]=A.exports}}]);
//# sourceMappingURL=BatterManageFirstAlarm.42d0acd3.js.map