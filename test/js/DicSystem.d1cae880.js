(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DicSystem"],{"1dfb":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticStyle:{"box-sizing":"border-box"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("字典列表查询")])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchForm,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"字典名称:"}},[a("el-input",{attrs:{placeholder:"请输入字典名称"},model:{value:t.searchForm.LikeName,callback:function(e){t.$set(t.searchForm,"LikeName",e)},expression:"searchForm.LikeName"}})],1),a("el-form-item",{attrs:{label:"字典类型:"}},[a("el-input",{attrs:{placeholder:"请输入字典类型"},model:{value:t.searchForm.LikeType,callback:function(e){t.$set(t.searchForm,"LikeType",e)},expression:"searchForm.LikeType"}})],1),a("el-form-item",{attrs:{label:"字典状态:"}},[a("el-select",{model:{value:t.searchForm.LikeStatus,callback:function(e){t.$set(t.searchForm,"LikeStatus",e)},expression:"searchForm.LikeStatus"}},t._l(t.options,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.searchForm.page=1,t.getData()}}},[t._v("查询")])],1)],1)],1),a("div",{staticStyle:{height:"20px",width:"100%"}})],1)]),a("el-card",{staticClass:"box-card visible"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("字典列表")])]),a("vxe-toolbar",{attrs:{custom:"",print:"",export:""},scopedSlots:t._u([{key:"buttons",fn:function(){return[a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 添加 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:t.deleteItems}},[a("i",{staticClass:"el-icon-delete"}),t._v(" 多选删除 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:t.getData}},[a("i",{staticClass:"el-icon-refresh-right"}),t._v(" 刷新 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:function(e){t.isShow=!t.isShow}}},[a("i",{staticClass:"el-icon-search"}),t._v(" 模糊查询 ")])]},proxy:!0}])}),a("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"xTable",attrs:{data:t.tableData,border:"","export-config":t.exportConfig,"element-loading-background":"rgba(0, 0, 0, 0)","show-overflow":"",resizable:"",align:"center","highlight-hover-row":"","highlight-current-row":""}},[a("vxe-table-column",{attrs:{type:"checkbox",width:"50",fixed:"left"}}),a("vxe-table-column",{attrs:{type:"seq",width:"50",title:"序号",fixed:"left"}}),a("vxe-table-column",{attrs:{field:"Text",title:"名称",width:"150",sortable:"","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"Type",title:"类型",width:"250","show-overflow":"",sortable:"",align:"left"}}),a("vxe-table-column",{attrs:{field:"Annotation",title:"备注",width:"350",sortable:"","show-overflow":"",align:"left"}}),a("vxe-table-column",{attrs:{field:"CreationTime",title:"创建时间",width:"200",sortable:"","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"Status",title:"状态",width:"200","show-overflow":""},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(" "+t._s("1"===o.Status?"正常":"停用")+" "),a("el-switch",{attrs:{"active-color":"#00A854","active-value":"1","inactive-color":"#F04134","inactive-value":"2"},on:{change:function(e){return t.updataKeyStatus(o)}},model:{value:o.Status,callback:function(e){t.$set(o,"Status",e)},expression:"row.Status"}})]}}])}),a("vxe-table-column",{attrs:{title:"操作",width:"350",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.toDetail(o.SystemID)}}},[t._v("详情")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.editItem(o)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteItem(o)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.searchForm.page,"page-sizes":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,visible:t.dialogFormVisible,title:"系统字典"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{"label-width":"90px","label-position":"right",model:t.addForm}},[a("el-form-item",{attrs:{label:"字典名称"}},[a("el-input",{attrs:{placeholder:"请输入字典名称"},model:{value:t.addForm.Text,callback:function(e){t.$set(t.addForm,"Text",e)},expression:"addForm.Text"}})],1),a("el-form-item",{attrs:{label:"字典类型"}},[a("el-input",{attrs:{placeholder:"请输入字典类型"},model:{value:t.addForm.Type,callback:function(e){t.$set(t.addForm,"Type",e)},expression:"addForm.Type"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注",autosize:{minRows:4,maxRows:8}},model:{value:t.addForm.Annotation,callback:function(e){t.$set(t.addForm,"Annotation",e)},expression:"addForm.Annotation"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.addKey}},[t._v(" 提 交 ")]),a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(" 取 消 ")])],1)],1),a("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,visible:t.dialogFormEditVisible,title:"修改数据"},on:{"update:visible":function(e){t.dialogFormEditVisible=e}}},[a("el-form",{attrs:{"label-width":"90px","label-position":"right",model:t.editForm}},[a("el-form-item",{attrs:{label:"字典名称"}},[a("el-input",{attrs:{placeholder:"请输入字典名称"},model:{value:t.editForm.Text,callback:function(e){t.$set(t.editForm,"Text",e)},expression:"editForm.Text"}})],1),a("el-form-item",{attrs:{label:"字典类型"}},[a("el-input",{attrs:{placeholder:"请输入字典类型"},model:{value:t.editForm.Type,callback:function(e){t.$set(t.editForm,"Type",e)},expression:"editForm.Type"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注",autosize:{minRows:4,maxRows:8}},model:{value:t.editForm.Annotation,callback:function(e){t.$set(t.editForm,"Annotation",e)},expression:"editForm.Annotation"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.editHttp}},[t._v(" 提 交 ")]),a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormEditVisible=!1}}},[t._v(" 取 消 ")])],1)],1)],1)],1)},i=[],s=a("2f62");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(a,!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c={data:function(){return{searchForm:{AutoSystemID:"",page:1,limit:10,LikeName:"",LikeType:"",LikeStatus:100},isShow:!0,options:[{label:"所有",value:100},{label:"正常",value:1},{label:"停用",value:2}],tableData:[],loading:!1,exportConfig:{filename:"export",sheetName:"Sheet1",types:["csv","xlsx"]},count:0,addForm:{},dialogFormVisible:!1,selectedItems:[],editForm:{AutoSystemID:"",SystemID:"",Text:"",Type:"",Annotation:""},dialogFormEditVisible:!1}},computed:l({},Object(s["c"])("table",["pageSize"])),created:function(){this.searchForm.AutoSystemID=localStorage.getItem("AutoSystemID"),this.searchForm.limit=this.pageSize[0],this.getData()},methods:l({},Object(s["b"])("tabs",["set_detail_label"]),{},Object(s["b"])("detail",["set_dictionaryDataParams"]),{handleSizeChange:function(t){this.searchForm.limit=t,this.getData()},handleCurrentChange:function(t){this.searchForm.page=t,this.getData()},getData:function(){var t=this;this.loading=!0;var e="/api/Dictionaries/GetKeyList";this.$axios.get(e,{params:this.searchForm}).then((function(e){0===e.data.code?(t.tableData=e.data.data,t.count=e.data.count,t.loading=!1):1===e.data.code&&t.$message.error(e.data.msg)})).catch((function(t){console.error(t)}))},updataKeyStatus:function(t){var e=this,a={AutoSystemID:this.searchForm.AutoSystemID,Status:parseInt(t.Status),SystemID:t.SystemID,Text:t.Text},o="/api/Dictionaries/UpdataKeyStatus";this.$axios.post(o,a).then((function(t){0===t.data.code?e.$message.success(t.data.msg):1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(t){console.error(t)}))},addKey:function(){var t=this;this.addForm.AutoSystemID=this.searchForm.AutoSystemID;var e="/api/Dictionaries/AddKey";this.$axios.post(e,this.addForm).then((function(e){0===e.data.code?(t.$message.success(e.data.msg),t.addForm={}):1===e.data.code&&t.$message.error(e.data.msg),t.dialogFormVisible=!1,t.getData()})).catch((function(t){console.error(t)}))},deleteItem:function(t){var e=this,a="/api/Dictionaries/DeleteKey",o={AutoSystemID:this.searchForm.AutoSystemID,data:[{SystemID:t.SystemID,Name:t.Text}]};this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.post(a,o).then((function(t){if(0===t.data.code){e.$message.success(t.data.msg);var a=Math.ceil((e.count-1)/e.searchForm.limit),o=e.searchForm.page>a?a:e.searchForm.page;e.searchForm.page=o<1?1:o,e.getData()}else 1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(t){console.error(t)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},deleteItems:function(){var t=this;this.selectedItems=this.$refs.xTable.getCheckboxRecords();var e=[];if(0===this.selectedItems.length)return this.$message.warning("请选择要删除的用户"),!1;var a=!0,o=!1,i=void 0;try{for(var s,r=this.selectedItems[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var l=s.value;e.push({Name:l.Text,SystemID:l.SystemID})}}catch(n){o=!0,i=n}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a="/api/Dictionaries/DeleteKey";t.$axios.post(a,{AutoSystemID:t.searchForm.AutoSystemID,data:e}).then((function(e){if(0===e.data.code){t.$message.success("删除成功");var a=Math.ceil((t.count-t.selectedItems.length)/t.searchForm.limit),o=t.searchForm.page>a?a:t.searchForm.page;t.searchForm.page=o<1?1:o,t.getData()}else 1===e.data.code&&t.$message.error(e.data.msg)})).catch((function(t){console.error(t)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},toDetail:function(t){console.log(t);var e="/dictionaryData",a="字典数据";this.set_detail_label(a),this.set_dictionaryDataParams(t),this.$router.push({path:e})},editItem:function(t){this.editForm=t,this.dialogFormEditVisible=!0},editHttp:function(){var t=this,e={AutoSystemID:this.searchForm.AutoSystemID,SystemID:this.editForm.SystemID,Text:this.editForm.Text,Type:this.editForm.Type,Annotation:this.editForm.Annotation},a="/api/Dictionaries/UpdataKey";this.$axios.post(a,e).then((function(e){0===e.data.code?(t.$message.success(e.data.msg),t.editForm={},t.dialogFormEditVisible=!1,t.getData()):1===e.data.code&&t.$message.error(e.data.msg)})).catch((function(t){console.error(t)}))}})},m=c,d=(a("1f19"),a("2877")),u=Object(d["a"])(m,o,i,!1,null,"8e4a0748",null);e["default"]=u.exports},"1f19":function(t,e,a){"use strict";var o=a("ff91"),i=a.n(o);i.a},ff91:function(t,e,a){}}]);
//# sourceMappingURL=DicSystem.d1cae880.js.map