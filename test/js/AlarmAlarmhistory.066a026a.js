(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AlarmAlarmhistory"],{"7c2a":function(e,t,a){"use strict";var r=a("e88f"),l=a.n(r);l.a},bff8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{"box-sizing":"border-box"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.$t("alarmHistory.searchTitle")))])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:e.$t("alarmHistory.searchForm.label")[0]}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":e.$t("base.datePicker.separator"),"start-placeholder":e.$t("base.datePicker.start"),"end-placeholder":e.$t("base.datePicker.end")},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("el-form-item",{attrs:{label:e.$t("alarmHistory.searchForm.label")[1]}},[a("el-select",{model:{value:e.searchForm.Affirm,callback:function(t){e.$set(e.searchForm,"Affirm",t)},expression:"searchForm.Affirm"}},e._l(e.options,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{label:e.$t("alarmHistory.searchForm.label")[2]}},[a("el-input",{attrs:{placeholder:e.$t("alarmHistory.searchForm.placeholder")[2]},model:{value:e.searchForm.LikeMessage,callback:function(t){e.$set(e.searchForm,"LikeMessage",t)},expression:"searchForm.LikeMessage"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchForm.page=1,e.getData()}}},[e._v(e._s(e.$t("base.searchbtn")))]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.goOtherDay("today")}}},[e._v(e._s(e.$t("base.dateGroup.today")))]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.goOtherDay("two")}}},[e._v(e._s(e.$t("base.dateGroup.twoDays")))]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.goOtherDay("week")}}},[e._v(e._s(e.$t("base.dateGroup.week")))]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.goOtherDay("month")}}},[e._v(e._s(e.$t("base.dateGroup.month")))])],1)],1)],1),a("div",{staticStyle:{height:"20px",width:"100%"}})],1)]),a("el-card",{staticClass:"box-card visible"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.$t("alarmHistory.listTitle")))])]),a("vxe-toolbar",{attrs:{custom:"",print:"",export:""},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.getData}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v(" "+e._s(e.$t("base.refresh"))+" ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:function(t){e.isShow=!e.isShow}}},[a("i",{staticClass:"el-icon-search"}),e._v(" "+e._s(e.$t("base.search"))+" ")])]},proxy:!0}])}),a("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"xTable",attrs:{data:e.tableData,"export-config":e.exportConfig,border:"","element-loading-background":"rgba(0, 0, 0, 0)","edit-config":{trigger:"manual",mode:"row"},resizable:"",align:"center","highlight-hover-row":"","highlight-current-row":""}},[a("vxe-table-column",{attrs:{type:"checkbox",width:"50",fixed:"left"}}),a("vxe-table-column",{attrs:{type:"seq",width:"50",title:e.$t("alarmHistory.tableLabel")[0],fixed:"left"}}),a("vxe-table-column",{attrs:{field:"Level",title:e.$t("alarmHistory.tableLabel")[1],sortable:"",width:"120","show-overflow":"","show-header-overflow":""}}),a("vxe-table-column",{attrs:{field:"Type",title:e.$t("alarmHistory.tableLabel")[2],width:"130",sortable:"","show-overflow":"","show-header-overflow":""}}),a("vxe-table-column",{attrs:{field:"Name",title:e.$t("alarmHistory.tableLabel")[3],sortable:"",width:"140","show-overflow":"","show-header-overflow":""}}),a("vxe-table-column",{attrs:{field:"Msg",title:e.$t("alarmHistory.tableLabel")[4],width:"420",align:"left","show-overflow":"","show-header-overflow":""}}),a("vxe-table-column",{attrs:{field:"WriteTime",title:e.$t("alarmHistory.tableLabel")[5],sortable:"",width:"180","show-overflow":"","show-header-overflow":""}}),a("vxe-table-column",{attrs:{field:"OverTime",title:e.$t("alarmHistory.tableLabel")[6],sortable:"",width:"180","show-overflow":"","show-header-overflow":""}}),a("vxe-table-column",{attrs:{title:e.$t("alarmHistory.tableLabel")[7],width:"330",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(t){return e.toDetail(r)}}},[a("i",{staticClass:"el-icon-info"},[e._v(" "+e._s(e.$t("alarmHistory.operationbtn")[0]))])]),a("el-button",{attrs:{type:"danger",size:"mini",disabled:r.OverTime>="2001/1/1 0:00:00"},on:{click:function(t){return e.showCheckDialog(r)}}},[a("i",{staticClass:"el-icon-circle-check"},[e._v(" "+e._s(e.$t("alarmHistory.operationbtn")[1]))])])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-sizes":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{width:"40%","close-on-click-modal":!1,visible:e.dialogFormCheckVisible,title:e.$t("alarmHistory.dialog.title")},on:{"update:visible":function(t){e.dialogFormCheckVisible=t}}},[a("el-form",{attrs:{"label-width":"90px","label-position":"right",model:e.checkForm}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("el-form-item",{attrs:{label:e.$t("alarmHistory.dialog.formLabel")[0]}},[a("el-input",{attrs:{readonly:!0},model:{value:e.checkForm.Level,callback:function(t){e.$set(e.checkForm,"Level",t)},expression:"checkForm.Level"}})],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("el-form-item",{attrs:{label:e.$t("alarmHistory.dialog.formLabel")[1]}},[a("el-input",{attrs:{readonly:!0},model:{value:e.checkForm.Type,callback:function(t){e.$set(e.checkForm,"Type",t)},expression:"checkForm.Type"}})],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("el-form-item",{attrs:{label:e.$t("alarmHistory.dialog.formLabel")[2]}},[a("el-input",{attrs:{readonly:!0},model:{value:e.checkForm.WriteTime,callback:function(t){e.$set(e.checkForm,"WriteTime",t)},expression:"checkForm.WriteTime"}})],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("el-form-item",{attrs:{label:e.$t("alarmHistory.dialog.formLabel")[3]}},[a("el-input",{attrs:{readonly:!0},model:{value:e.checkForm.Name,callback:function(t){e.$set(e.checkForm,"Name",t)},expression:"checkForm.Name"}})],1)],1),a("el-form-item",{attrs:{label:e.$t("alarmHistory.dialog.formLabel")[4]}},[a("el-input",{attrs:{type:"textarea",placeholder:e.$t("alarmHistory.dialog.formPlaceholder"),autosize:{minRows:4,maxRows:8}},model:{value:e.checkList.AlarmOverInfo,callback:function(t){e.$set(e.checkList,"AlarmOverInfo",t)},expression:"checkList.AlarmOverInfo"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){e.checkList.AlarmOverInfo=e.$t("alarmHistory.dialog.default.msg")}}},[e._v(" "+e._s(e.$t("alarmHistory.dialog.default.btn"))+" ")]),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.setAlarmOver}},[e._v(" "+e._s(e.$t("base.submit"))+" ")]),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogFormCheckVisible=!1}}},[e._v(" "+e._s(e.$t("base.cancel"))+" ")])],1)],1),a("Drawer",{attrs:{closable:!1,title:"告警详情",draggable:"",width:"30"},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}},[a("p",{style:e.pStyle},[e._v(e._s(e.$t("alarmHistory.detail.label")[0]))]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.Level)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v(e._s(e.$t("alarmHistory.detail.label")[1]))]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.Type)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v(e._s(e.$t("alarmHistory.detail.label")[2]))]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.ASource)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v(e._s(e.$t("alarmHistory.detail.label")[3]))]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.Name)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v(e._s(e.$t("alarmHistory.detail.label")[4]))]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.Msg)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v(e._s(e.$t("alarmHistory.detail.label")[5]))]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.OverAccountNumber)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v(e._s(e.$t("alarmHistory.detail.label")[6]))]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.OverUserName)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v(e._s(e.$t("alarmHistory.detail.label")[7]))]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.OverMsg)+" ")])],1)],1)],1)},l=[],o=a("2f62");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n=a("c1df"),m={data:function(){return{searchForm:{AutoSystemID:"",Start:"",Stop:"",Affirm:"100",LikeMessage:"",page:1,limit:10},tableData:[],count:0,isShow:!0,loading:!1,dialogFormVisible:!1,options:[{label:this.$t("alarmHistory.detail.options")[0],value:"100"},{label:this.$t("alarmHistory.detail.options")[1],value:"1"},{label:this.$t("alarmHistory.detail.options")[2],value:"0"}],value:"",detailData:[],dialogFormCheckVisible:!1,checkList:{AlarmOverInfo:"",AlarmSystemID:"",AutoSystemID:""},checkForm:{Level:"",Type:"",WriteTime:"",Name:""},activeItem:"",value4:!1,pStyle:{fontSize:"16px",color:"rgba(0,0,0,0.85)",lineHeight:"24px",display:"block",marginBottom:"16px"},exportConfig:{filename:"export",sheetName:"Sheet1",types:["csv","xlsx"]}}},computed:s({},Object(o["c"])("table",["pageSize"])),created:function(){var e=n().subtract(0,"days").format("YYYY-MM-DD");this.value=[e,e],this.searchForm.AutoSystemID=localStorage.getItem("AutoSystemID"),this.searchForm.limit=this.pageSize[0],this.getData()},methods:{handleSizeChange:function(e){this.searchForm.limit=e,this.getData()},handleCurrentChange:function(e){this.searchForm.page=e,this.getData()},getData:function(){var e=this;this.loading=!0,this.searchForm.Start=n(this.value[0]).format("YYYY-MM-DD"),this.searchForm.Stop=n(this.value[1]).format("YYYY-MM-DD");var t="/api/Alarm/GetAlarmhistory";this.$axios.get(t,{params:this.searchForm}).then((function(t){0===t.data.code?(e.tableData=t.data.data,e.count=t.data.count,e.loading=!1):1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))},toDetail:function(e){this.getAlarmhistoryInfo(e.SystemID)},getAlarmhistoryInfo:function(e){var t=this,a="/api/Alarm/GetAlarmhistoryInfo";this.$axios.get("".concat(a,"?AutoSystemID=").concat(this.searchForm.AutoSystemID,"&SystemID=").concat(e)).then((function(e){0===e.data.code?(t.activeItem=e.data.data,t.value4=!0):1===e.data.code&&t.$message.error(e.data.msg)})).catch((function(e){console.error(e)}))},goOtherDay:function(e){var t;switch(e){case"today":t=n().subtract(0,"days").format("YYYY-MM-DD");break;case"two":t=n().subtract(2,"days").format("YYYY-MM-DD"),console.log(t);break;case"week":t=n().subtract(1,"weeks").format("YYYY-MM-DD");break;case"month":t=n().subtract(1,"months").format("YYYY-MM-DD");break}this.value=[t,new Date]},showCheckDialog:function(e){this.checkForm.Level=e.Level,this.checkForm.Name=e.Name,this.checkForm.Type=e.Type,this.checkForm.WriteTime=e.WriteTime,this.checkList.AutoSystemID=this.searchForm.AutoSystemID,this.checkList.AlarmSystemID=e.SystemID,this.dialogFormCheckVisible=!0},setAlarmOver:function(){var e=this,t="/api/Alarm/SetAlarmOver";this.$axios.post(t,this.checkList).then((function(t){0===t.data.code?(e.$message.success(t.data.msg),e.dialogFormCheckVisible=!1,e.getData()):1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))}}},d=m,h=(a("7c2a"),a("2877")),u=Object(h["a"])(d,r,l,!1,null,"4dd6e66e",null);t["default"]=u.exports},e88f:function(e,t,a){}}]);
//# sourceMappingURL=AlarmAlarmhistory.066a026a.js.map