(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TokenManage"],{4097:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{"box-sizing":"border-box"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户列表查询")])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"登记名称:"}},[a("el-input",{attrs:{placeholder:"请输入登记名称"},model:{value:e.searchForm.LikeUserName,callback:function(t){e.$set(e.searchForm,"LikeUserName",t)},expression:"searchForm.LikeUserName"}})],1),a("el-form-item",{attrs:{label:"登记手机:"}},[a("el-input",{attrs:{placeholder:"请输入登记手机"},model:{value:e.searchForm.LikePhone,callback:function(t){e.$set(e.searchForm,"LikePhone",t)},expression:"searchForm.LikePhone"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchForm.page=1,e.getData()}}},[e._v("查询")])],1)],1)],1),a("div",{staticStyle:{height:"20px",width:"100%"}})],1)]),a("el-card",{staticClass:"box-card visible"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户列表")])]),a("vxe-toolbar",{attrs:{custom:"",print:"",export:""},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.getData}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v(" 刷新 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:function(t){e.isShow=!e.isShow}}},[a("i",{staticClass:"el-icon-search"}),e._v(" 模糊查询 ")])]},proxy:!0}])}),a("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"xTable",attrs:{data:e.tableData,border:"","export-config":e.exportConfig,"element-loading-background":"rgba(0, 0, 0, 0)","show-overflow":"",resizable:"",align:"center","highlight-hover-row":"","highlight-current-row":""}},[a("vxe-table-column",{attrs:{type:"checkbox",width:"50",fixed:"left"}}),a("vxe-table-column",{attrs:{type:"seq",width:"50",title:"序号",fixed:"left"}}),a("vxe-table-column",{attrs:{field:"Name",title:"名称",width:"135",sortable:"","show-overflow":"","show-header-overflow":""}}),a("vxe-table-column",{attrs:{field:"Phone",title:"手机号码",width:"180","show-overflow":"","show-header-overflow":"",sortable:""}}),a("vxe-table-column",{attrs:{field:"Reason",title:"申请原因","show-overflow":"","show-header-overflow":"",width:"200"}}),a("vxe-table-column",{attrs:{field:"RecordDate",title:"申请时间",width:"200",sortable:"","show-overflow":"","show-header-overflow":""}}),a("vxe-table-column",{attrs:{field:"Indate",title:"有效时间",width:"200",sortable:"","show-overflow":"","show-header-overflow":""}}),a("vxe-table-column",{attrs:{field:"IsLock",title:"审核",width:"150",sortable:"","show-overflow":"","show-header-overflow":""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[e._v(" "+e._s("1"===o.Audit?"是":"否")+" "),a("el-switch",{attrs:{"active-color":"#00A854","active-value":"1","inactive-color":"#F04134","inactive-value":"0",disabled:"1"===o.Audit},on:{change:function(t){return e.editStatus(o)}},model:{value:o.Audit,callback:function(t){e.$set(o,"Audit",t)},expression:"row.Audit"}})]}}])}),a("vxe-table-column",{attrs:{title:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteItem(o)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-sizes":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},r=[],s=a("2f62");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c={data:function(){return{searchForm:{LikeName:"",LikePhone:"",page:1,limit:10},tableData:[],loading:!1,count:0,exportConfig:{filename:"export",sheetName:"Sheet1",types:["csv","xlsx"]},isShow:!0}},computed:n({},Object(s["c"])("table",["pageSize"])),created:function(){this.searchForm.AutoSystemID=localStorage.getItem("AutoSystemID"),this.searchForm.limit=this.pageSize[0],this.getData()},methods:{handleSizeChange:function(e){this.searchForm.limit=e,this.getData()},handleCurrentChange:function(e){this.searchForm.page=e,this.getData()},getData:function(){var e=this;this.loading=!0;var t="/api/Users/GetTokenList";this.$axios.get(t,{params:this.searchForm}).then((function(t){0===t.data.code?(e.tableData=t.data.data,e.count=t.data.count,e.loading=!1):1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))},deleteItem:function(e){var t=this,a="/api/Users/DelToken",o={AutoSystemID:this.searchForm.AutoSystemID,TokenSystemID:e.SystemID};this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post(a,o).then((function(e){0===e.data.code||1===e.data.code&&t.$message.error(e.data.msg),setTimeout((function(){t.$message.success("删除成功");var e=Math.ceil((t.count-1)/t.searchForm.limit),a=t.searchForm.page>e?e:t.searchForm.page;t.searchForm.page=a<1?1:a,t.getData()}),100)})).catch((function(e){console.error(e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},editStatus:function(e){var t=this,a={AutoSystemID:this.searchForm.AutoSystemID,TokenSystemID:e.SystemID},o="/api/Users/SetTokenAudit";this.$axios.post(o,a).then((function(e){0===e.data.code?t.$message.success(e.data.msg):1===e.data.code&&t.$message.error(e.data.msg)})).catch((function(e){console.error(e)}))}}},h=c,u=a("2877"),d=Object(u["a"])(h,o,r,!1,null,"393f09c0",null);t["default"]=d.exports}}]);
//# sourceMappingURL=TokenManage.2148591f.js.map