(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SystemControl"],{3821:function(t,e,a){"use strict";var l=a("964e"),s=a.n(l);s.a},"964e":function(t,e,a){},e2ff:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticStyle:{"box-sizing":"border-box"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("systemControl.searchTitle")))])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline,"label-width":"90px","label-position":"right"}},[a("el-form-item",{attrs:{label:t.$t("systemControl.searchForm.label")[0]}},[a("el-input",{attrs:{placeholder:t.$t("systemControl.searchForm.placeholder")[0]},model:{value:t.formInline.ICCID,callback:function(e){t.$set(t.formInline,"ICCID",e)},expression:"formInline.ICCID"}})],1),a("el-form-item",{attrs:{label:t.$t("systemControl.searchForm.label")[1]}},[a("el-input",{attrs:{placeholder:t.$t("systemControl.searchForm.placeholder")[1]},model:{value:t.formInline.IDS,callback:function(e){t.$set(t.formInline,"IDS",e)},expression:"formInline.IDS"}})],1),a("el-form-item",{attrs:{label:t.$t("systemControl.searchForm.label")[2]}},[a("el-input",{attrs:{placeholder:t.$t("systemControl.searchForm.placeholder")[2]},model:{value:t.formInline.VIN,callback:function(e){t.$set(t.formInline,"VIN",e)},expression:"formInline.VIN"}})],1),a("el-form-item",{attrs:{label:t.$t("systemControl.searchForm.label")[3]}},[a("el-input",{attrs:{placeholder:t.$t("systemControl.searchForm.placeholder")[3]},model:{value:t.formInline.Name,callback:function(e){t.$set(t.formInline,"Name",e)},expression:"formInline.Name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.formInline.page=1,t.getData()}}},[t._v(t._s(t.$t("base.searchbtn")))])],1)],1)],1),a("div",{staticStyle:{height:"20px",width:"100%"}})],1)]),a("el-card",{staticClass:"box-card visible"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("systemControl.listTitle")))])]),a("vxe-toolbar",{attrs:{custom:"",print:"",export:""},scopedSlots:t._u([{key:"buttons",fn:function(){return[a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:t.getData}},[a("i",{staticClass:"el-icon-refresh-right"}),t._v(" "+t._s(t.$t("base.refresh"))+" ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:function(e){t.isShow=!t.isShow}}},[a("i",{staticClass:"el-icon-search"}),t._v(" "+t._s(t.$t("base.search"))+" ")])]},proxy:!0}])}),a("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"xTable",attrs:{data:t.tableData,border:"","export-config":t.exportConfig,"element-loading-background":"rgba(0, 0, 0, 0)",resizable:"",align:"center","expand-config":{},"row-id":"id","highlight-hover-row":"","highlight-current-row":""}},[a("vxe-table-column",{attrs:{type:"checkbox",width:"50"}}),a("vxe-table-column",{attrs:{type:"seq",width:"50",title:t.$t("systemControl.tableLabel")[0]}}),a("vxe-table-column",{attrs:{field:"DIDS",title:t.$t("systemControl.tableLabel")[1],sortable:"",width:"400","show-overflow":"",align:"left"}}),a("vxe-table-column",{attrs:{field:"DName",title:t.$t("systemControl.tableLabel")[2],sortable:"",width:"200"}}),a("vxe-table-column",{attrs:{field:"DManageMentUserName",title:t.$t("systemControl.tableLabel")[3],sortable:"",width:"200",align:"left"}}),a("vxe-table-column",{attrs:{field:"DTime",title:t.$t("systemControl.tableLabel")[4],sortable:"",width:"300"}}),a("vxe-table-column",{attrs:{type:"expand",title:t.$t("systemControl.tableLabel")[5],width:"80px"},scopedSlots:t._u([{key:"content",fn:function(e){var l=e.row;return t._l(t.detail,(function(e,s){return a("el-button",{key:s,attrs:{plain:"",size:"mini"},on:{click:function(a){return t.toDetail(l,e)}}},[a("i",{staticClass:"el-icon-info"},[t._v(t._s(e.label))])])}))}}])})],1),a("el-pagination",{attrs:{"current-page":t.formInline.page,"page-sizes":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("el-dialog",{attrs:{width:"50%","close-on-click-modal":!1,title:t.activeDialog.label,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("systemControl.dialog.title")))])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!1,model:t.formList,"label-width":"90px","label-position":"right"}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:8,xl:8}},[a("el-form-item",{attrs:{label:t.$t("systemControl.dialog.label")[0]}},[a("el-input",{attrs:{readonly:!0},model:{value:t.formList.BatteryIDS,callback:function(e){t.$set(t.formList,"BatteryIDS",e)},expression:"formList.BatteryIDS"}})],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:8,xl:8}},[a("el-form-item",{attrs:{label:t.$t("systemControl.dialog.label")[1]}},[a("el-input",{attrs:{readonly:!0},model:{value:t.formList.DName,callback:function(e){t.$set(t.formList,"DName",e)},expression:"formList.DName"}})],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:8,xl:8}},[a("el-form-item",{attrs:{label:t.$t("systemControl.dialog.label")[2]}},[a("el-select",{on:{change:t.getBatteryBankCTRLParaCharts},model:{value:t.formList.BankIndex,callback:function(e){t.$set(t.formList,"BankIndex",e)},expression:"formList.BankIndex"}},[a("el-option",{attrs:{label:"Bank1",value:"0"}}),a("el-option",{attrs:{label:"Bank2",value:"1"}})],1)],1)],1)],1)],1),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.activeDialog.label)+t._s(t.$t("systemControl.dialog.suffix")))])]),a("el-form",{attrs:{inline:!0,"label-width":"180px","label-position":"left"}},[a("el-form-item",{attrs:{label:t.activeDialog.label,id:"state"}},t._l(t.stateList,(function(e,l){return a("el-col",{key:l,attrs:{xs:12,sm:12,md:6,lg:6,xl:6}},[a("el-switch",{staticStyle:{"margin-left":"20px","vertical-align":"center"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":t.$t("systemControl.unit")[0]+e.index+t.$t("systemControl.unit")[1]},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1)})),1),a("el-form-item",{staticStyle:{float:"right","margin-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(t.$t("base.submit")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.getBatteryBankCTRLParaCharts}},[t._v(t._s(t.$t("base.refresh")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("base.cancel")))])],1)],1)],1)],1)],1)],1)},s=[],i=a("2f62");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,l)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(a,!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c={data:function(){return{formInline:{page:1,limit:2,ICCID:"",IDS:"",VIN:"",Name:"",AutoSystemID:""},tableData:[],isShow:!0,exportConfig:{filename:"export",sheetName:"Sheet1",types:["csv","xlsx"]},count:0,loading:!1,detail:[{label:this.$t("systemControl.detail")[0],path:"sYSTEM_RESET",BankAddres1:"0x7785",BankAddres2:"0x2785"},{label:this.$t("systemControl.detail")[1],path:"sYSTEM_OPERATION_MODE",BankAddres1:"0x7786",BankAddres2:"0x2786"},{label:this.$t("systemControl.detail")[2],path:"sHORT_CIRCUIT_PROTECTION_SWITCH",BankAddres1:"0x7787",BankAddres2:"0x2787"},{label:this.$t("systemControl.detail")[3],path:"sOFT_POWER_OFF",BankAddres1:"0x7788",BankAddres2:"0x2788"},{label:this.$t("systemControl.detail")[4],path:"sTART_INSULATION_SAMPLING",BankAddres1:"0x7789",BankAddres2:"0x2789"},{label:this.$t("systemControl.detail")[5],path:"sLAVEID_IS_AUTOMATICALLY_ASSIGNED",BankAddres1:"0x778A",BankAddres2:"0x278A"},{label:this.$t("systemControl.detail")[6],path:".fAULT_CODE_ENABLE",BankAddres1:"0x778B",BankAddres2:"0x278B"},{label:this.$t("systemControl.detail")[7],path:"rESET_EEPROM",BankAddres1:"0x778C",BankAddres2:"0x278C"},{label:this.$t("systemControl.detail")[8],path:"rEVERSE_PROTECTION_SWITCH",BankAddres1:"0x778D",BankAddres2:"0x278D"},{label:this.$t("systemControl.detail")[9],path:"sTART_THE_TEST",BankAddres1:"0x778E",BankAddres2:"0x278E"},{label:this.$t("systemControl.detail")[10],path:"pASSIVE_EQUALIZATION",BankAddres1:"0x778F",BankAddres2:"0x278F"}],dialogFormVisible:!1,activeDialog:"",formList:{AutoSystemID:"",BatteryIDS:"",BankIndex:"",DName:""},formData:{},value:!0,stateList:[{index:"1",value:!0,num:1},{index:"2",value:!0,num:2},{index:"3",value:!0,num:4},{index:"4",value:!0,num:8},{index:"5",value:!0,num:16},{index:"6",value:!0,num:32},{index:"7",value:!0,num:64},{index:"8",value:!0,num:128},{index:"9",value:!0,num:256},{index:"10",value:!0,num:512},{index:"11",value:!0,num:1024},{index:"12",value:!0,num:2048}]}},methods:o({},Object(i["b"])("detail",["set_paramsD","set_paramsB","set_paramsS"]),{},Object(i["b"])("tabs",["set_detail_label"]),{getData:function(){var t=this;this.loading=!0,this.formInline.AutoSystemID=localStorage.getItem("AutoSystemID"),this.$axios.get("/api/Devices/GetRegistrationEquipmentList?AutoSystemID=".concat(this.formInline.AutoSystemID,"&page=").concat(this.formInline.page,"&limit=").concat(this.formInline.limit,"&ICCID=").concat(this.formInline.ICCID,"&IDS=").concat(this.formInline.IDS,"&VIN=").concat(this.formInline.VIN,"&Name=").concat(this.formInline.Name)).then((function(e){e.data.data?t.tableData=e.data.data:t.tableData=[],t.count=e.data.count,t.loading=!1})).catch((function(t){console.log(t)}))},handleSizeChange:function(t){this.formInline.limit=t,this.getData()},handleCurrentChange:function(t){this.formInline.page=t,this.getData()},toDetail:function(t,e){this.activeDialog=e,this.formList.BatteryIDS=t.DIDS,this.formList.AutoSystemID=this.formInline.AutoSystemID,this.formList.BankIndex="0",this.formList.DName=t.DName,this.getBatteryBankCTRLParaCharts(),this.dialogFormVisible=!0},getBatteryBankCTRLParaCharts:function(){var t=this,e=this.activeDialog.path,a="/api/Chart/GetBatteryBankCTRLParaCharts";this.$axios.get(a,{params:{AutoSystemID:this.formList.AutoSystemID,BatteryIDS:this.formList.BatteryIDS,BankIndex:this.formList.BankIndex}}).then((function(a){if(0===a.data.code)for(var l in a.data.data[e]){var s=l.split("_"),i=parseInt(s.pop())-1;t.stateList[i].value=a.data.data[e][l]}else 1===a.data.code&&t.$message.error(a.data.msg)})).catch((function(t){console.error(t)}))},submit:function(){var t,e=this,a=0,l="/api/Command/Write",s=!0,i=!1,r=void 0;try{for(var o,n=this.stateList[Symbol.iterator]();!(s=(o=n.next()).done);s=!0){var c=o.value;c.value&&(a|=c.num)}}catch(m){i=!0,r=m}finally{try{s||null==n.return||n.return()}finally{if(i)throw r}}t=1==this.formList.BankIndex?parseInt(this.activeDialog.BankAddres1):parseInt(this.activeDialog.BankAddres2),this.$axios.post(l,{AutoSystemID:this.formList.AutoSystemID,data:{Address:t,IDS:this.formList.BatteryIDS,Data:[a]}}).then((function(t){0===t.data.code?(e.$message.success(t.data.msg),e.dialogFormVisible=!1,setTimeout((function(){e.getBatteryBankCTRLParaCharts()}),1e3)):1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(t){console.error(t)}))}}),computed:o({},Object(i["c"])("table",["pageSize"])),created:function(){this.formInline.limit=this.pageSize[0],this.getData()}},m=c,d=(a("3821"),a("2877")),u=Object(d["a"])(m,l,s,!1,null,"0083c4e4",null);e["default"]=u.exports}}]);
//# sourceMappingURL=SystemControl.2bd6fa0d.js.map