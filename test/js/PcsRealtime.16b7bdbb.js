(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PcsRealtime"],{"2ca1":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-collapse-transition",[l("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{"box-sizing":"border-box"}},[l("el-card",{staticClass:"box-card"},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v("模糊查询")])]),l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,"label-width":"90px","label-position":"right"}},[l("el-form-item",{attrs:{label:"ICCID编号:"}},[l("el-input",{attrs:{placeholder:"请输入ICCID编号"},model:{value:e.formInline.ICCID,callback:function(t){e.$set(e.formInline,"ICCID",t)},expression:"formInline.ICCID"}})],1),l("el-form-item",{attrs:{label:"设备编号:"}},[l("el-input",{attrs:{placeholder:"请输入设备编号"},model:{value:e.formInline.IDS,callback:function(t){e.$set(e.formInline,"IDS",t)},expression:"formInline.IDS"}})],1),l("el-form-item",{attrs:{label:"VIN编码:"}},[l("el-input",{attrs:{placeholder:"请输入VIN编码"},model:{value:e.formInline.VIN,callback:function(t){e.$set(e.formInline,"VIN",t)},expression:"formInline.VIN"}})],1),l("el-form-item",{attrs:{label:"设备名称:"}},[l("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.formInline.Name,callback:function(t){e.$set(e.formInline,"Name",t)},expression:"formInline.Name"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.formInline.page=1,e.getData()}}},[e._v("查询")])],1)],1)],1),l("div",{staticStyle:{height:"20px",width:"100%"}})],1)]),l("el-card",{staticClass:"box-card visible"},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v("设备管理")])]),l("vxe-toolbar",{attrs:{custom:"",print:"",export:""},scopedSlots:e._u([{key:"buttons",fn:function(){return[l("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.getData}},[l("i",{staticClass:"el-icon-refresh-right"}),e._v(" 刷新 ")]),l("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:function(t){e.isShow=!e.isShow}}},[l("i",{staticClass:"el-icon-search"}),e._v(" 模糊查询 ")])]},proxy:!0}])}),l("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,border:"","export-config":e.exportConfig,"element-loading-background":"rgba(0, 0, 0, 0)","edit-config":{trigger:"manual",mode:"row"},resizable:"","highlight-hover-row":"","highlight-current-row":""}},[l("vxe-table-column",{attrs:{type:"checkbox",width:"50",fixed:"left",align:"center"}}),l("vxe-table-column",{attrs:{type:"seq",width:"50",title:"序号",fixed:"left",align:"center"}}),l("vxe-table-column",{attrs:{field:"DICCID",title:"ICCID",sortable:"",width:"300","show-overflow":"","show-header-overflow":""}}),l("vxe-table-column",{attrs:{field:"DIDS",title:"设备ID",sortable:"",width:"300","show-overflow":"","show-header-overflow":""}}),l("vxe-table-column",{attrs:{field:"DName",title:"设备名称",sortable:"",width:"200","show-overflow":"","show-header-overflow":""}}),l("vxe-table-column",{attrs:{field:"DManageMentUserName",title:"设备管理员",sortable:"",width:"200","show-overflow":"","show-header-overflow":""}}),l("vxe-table-column",{attrs:{field:"DTime",title:"登记时间",width:"250",sortable:"","show-overflow":"","show-header-overflow":""}}),l("vxe-table-column",{attrs:{title:"操作",align:"center",width:"250","show-overflow":"","show-header-overflow":""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[l("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){return e.showDialog(i)}}},[l("i",{staticClass:"el-icon-info"},[e._v("显示数据")])])]}}])})],1),l("el-pagination",{attrs:{"current-page":e.formInline.page,"page-sizes":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),l("el-dialog",{attrs:{title:"显示数据",visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{staticStyle:{position:"relative"},attrs:{model:e.form}},[e.spinShow1?l("Spin",{attrs:{fix:""}}):e._e(),l("el-form-item",{attrs:{label:"设备名称","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off",readonly:""},model:{value:e.dname,callback:function(t){e.dname=t},expression:"dname"}})],1),l("el-form-item",{attrs:{label:"识别号码","label-width":e.formLabelWidth}},[l("el-input",{attrs:{readonly:"",autocomplete:"off"},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}})],1),l("el-form-item",{attrs:{label:"Bank序号","label-width":e.formLabelWidth}},[l("el-select",{on:{change:e.getConfig},model:{value:e.form.PCSIndex,callback:function(t){e.$set(e.form,"PCSIndex",t)},expression:"form.PCSIndex"}},[l("el-option",{attrs:{label:"PCS 1",value:"0"}}),l("el-option",{attrs:{label:"PCS 2",value:"1"}})],1)],1),l("el-form-item",{attrs:{label:"数据类型","label-width":e.formLabelWidth}},[l("el-select",{on:{change:e.getConfig},model:{value:e.form.ConfigType,callback:function(t){e.$set(e.form,"ConfigType",t)},expression:"form.ConfigType"}},e._l(e.list,(function(e,t){return l("el-option",{key:t,attrs:{value:e.Type,label:e.Name}})})),1)],1),l("el-form-item",{attrs:{label:"原始数据","label-width":e.formLabelWidth}},[l("vxe-table",{ref:"xTable",staticStyle:{width:"100%"},attrs:{height:"300px",data:e.tableData1,border:""}},[l("vxe-table-column",{attrs:{field:"RowIndex",title:"起始地址"}}),l("vxe-table-column",{attrs:{field:"Cell0",title:"第一列"}}),l("vxe-table-column",{attrs:{field:"Cell1",title:"第二列"}}),l("vxe-table-column",{attrs:{field:"Cell2",title:"第三列"}}),l("vxe-table-column",{attrs:{field:"Cell3",title:"第四列"}}),l("vxe-table-column",{attrs:{field:"Cell4",title:"第五列"}}),l("vxe-table-column",{attrs:{field:"Cell5",title:"第六列"}}),l("vxe-table-column",{attrs:{field:"Cell6",title:"第七列"}}),l("vxe-table-column",{attrs:{field:"Cell7",title:"第八列"}}),l("vxe-table-column",{attrs:{field:"Cell8",title:"第九列"}}),l("vxe-table-column",{attrs:{field:"Cell9",title:"第十列"}})],1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary",disabled:e.spinShow1},on:{click:e.exportExcel1}},[e._v("下 载")])],1)],1)],1)],1)},a=[],o=l("2f62");function n(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,i)}return l}function r(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?n(l,!0).forEach((function(t){s(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):n(l).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function s(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var c={data:function(){return{formInline:{page:1,limit:2,ICCID:"",IDS:"",VIN:"",Name:"",AutoSystemID:""},tableData:[],isShow:!0,count:0,loading:!1,form:{AutoSystemID:"",ConfigType:"",DeviceSystemID:"",PCSIndex:""},formLabelWidth:"90px",dialogFormVisible:!1,list:[],spinShow1:!1,deviceid:"",tableData1:[],listHead:"",listFilter:"",listHead1:"",listFilter1:"",exportConfig:{filename:"export",sheetName:"Sheet1",types:["csv","xlsx"]},dname:""}},methods:{handleSizeChange:function(e){this.formInline.limit=e,this.getData()},handleCurrentChange:function(e){this.formInline.page=e,this.getData()},exportExcel1:function(){this.$refs.xTable.exportData({type:"xlsx",filename:"export",sheetName:"Sheet1"})},showDialog:function(e){this.dialogFormVisible=!0,this.spinShow1=!0,this.form.DeviceSystemID=e.SystemID,this.deviceid=e.DICCID,this.dname=e.DName,this.form.AutoSystemID=this.formInline.AutoSystemID,this.form.PCSIndex="0",this.getValueInfo()},getData:function(){var e=this;this.loading=!0,this.$axios.get("/api/Devices/GetRegistrationEquipmentList?AutoSystemID=".concat(this.formInline.AutoSystemID,"&page=").concat(this.formInline.page,"&limit=").concat(this.formInline.limit,"&ICCID=").concat(this.formInline.ICCID,"&IDS=").concat(this.formInline.IDS,"&VIN=").concat(this.formInline.VIN,"&Name=").concat(this.formInline.Name)).then((function(t){0===t.data.code?e.tableData=t.data.data:e.tableData=[],e.count=t.data.count,e.loading=!1})).catch((function(e){console.log(e)}))},getValueInfo:function(){var e=this;this.list=[],this.$axios.get("/api/Dictionaries/GetValueInfo?AutoSystemID=".concat(this.formInline.AutoSystemID,"&KeyType=DMS_PCS_TYPE")).then((function(t){0===t.data.code&&(t.data.data.forEach((function(t){e.list.push(t.SlaveInfo)})),e.form.ConfigType=e.list[0].Type,e.getConfig()),setTimeout((function(){e.spinShow1=!1}),500)})).catch((function(e){console.log(e)}))},getConfig:function(){var e=this;this.tableData1=[];var t="/api/Realtime/GetPCSInfo";this.$axios.get(t,{params:this.form}).then((function(t){0===t.data.code?e.tableData1=t.data.data:e.$message.error(t.data.msg),setTimeout((function(){e.spinShow1=!1}),500)})).catch((function(e){console.log(e)}))}},computed:r({},Object(o["c"])("table",["pageSize"])),created:function(){this.formInline.AutoSystemID=localStorage.getItem("AutoSystemID"),this.formInline.limit=this.pageSize[0],this.getData()}},f=c,m=(l("e433"),l("2877")),d=Object(m["a"])(f,i,a,!1,null,"55a0895f",null);t["default"]=d.exports},"2cee":function(e,t,l){},e433:function(e,t,l){"use strict";var i=l("2cee"),a=l.n(i);a.a}}]);
//# sourceMappingURL=PcsRealtime.16b7bdbb.js.map