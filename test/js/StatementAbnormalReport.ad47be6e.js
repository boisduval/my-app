(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StatementAbnormalReport"],{9187:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticStyle:{"box-sizing":"border-box"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("查询")])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchForm,"label-position":"right"}},[a("el-form-item",{attrs:{label:"范围选择:","label-width":"80px"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:t.getData},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),a("el-form-item",{attrs:{label:"设备名称:","label-width":"80px"}},[a("el-select",{on:{change:t.getData},model:{value:t.searchForm.DeviceSystemID,callback:function(e){t.$set(t.searchForm,"DeviceSystemID",e)},expression:"searchForm.DeviceSystemID"}},t._l(t.options,(function(t,e){return a("el-option",{key:e,attrs:{value:t.SystemID,label:t.Name}})})),1)],1),a("el-form-item",{attrs:{label:"设备Bank","label-width":"80px"}},[a("el-select",{on:{change:t.getData},model:{value:t.searchForm.BankIndex,callback:function(e){t.$set(t.searchForm,"BankIndex",e)},expression:"searchForm.BankIndex"}},[a("el-option",{attrs:{label:"Bank1",value:"0"}}),a("el-option",{attrs:{label:"Bank2",value:"1"}})],1)],1),a("el-form-item",{attrs:{"label-width":"20px",label:" "}},[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.goOtherDay("yesterday")}}},[t._v("昨天")]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.goOtherDay("week")}}},[t._v("近一周")]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return t.goOtherDay("month")}}},[t._v("近一月")])],1)],1)],1),a("div",{staticStyle:{height:"20px",width:"100%"}})],1)]),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("异常总览")])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wrap-box flex-row"},[a("div",{staticClass:"wrap",staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0 20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":!1,data:t.table1,"row-class-name":t.tableRowClassName,border:!0}},[a("el-table-column",{attrs:{prop:"one",align:"center","show-overflow-tooltip":"",label:"1"}}),a("el-table-column",{attrs:{prop:"two",align:"center","show-overflow-tooltip":"",label:"2"}}),a("el-table-column",{attrs:{prop:"three",align:"center","show-overflow-tooltip":"",label:"3"}}),a("el-table-column",{attrs:{prop:"four",align:"center","show-overflow-tooltip":"",label:"4"}}),a("el-table-column",{attrs:{prop:"five",align:"center","show-overflow-tooltip":"",label:"5"}}),a("el-table-column",{attrs:{prop:"six",align:"center","show-overflow-tooltip":"",label:"6"}}),a("el-table-column",{attrs:{prop:"seven",align:"center","show-overflow-tooltip":"",label:"7"}})],1)],1)]),a("div",{staticClass:"wrap"},[a("div",{staticStyle:{height:"350px",padding:"0 20px"},attrs:{id:"myChart1"}})]),a("div",{staticClass:"wrap"},[a("div",{staticStyle:{height:"350px",padding:"0 20px"},attrs:{id:"myChart2"}})])])])],1)},i=[],o=a("c1df"),l={data:function(){return{searchForm:{AutoSystemID:"",DeviceSystemID:"",BankIndex:"",Start:"",Stop:""},tableData:[],loading:!1,isShow:!0,options:[],value:"",table1:[]}},created:function(){this.searchForm.AutoSystemID=localStorage.getItem("AutoSystemID"),this.searchForm.BankIndex="0";var t=o().subtract(0,"days").format("YYYY-MM-DD"),e=o().subtract(1,"days").format("YYYY-MM-DD");this.value=[e,t],this.getDevices()},methods:{getData:function(){var t=this;this.loading=!0,this.table1=[],this.table2=[],this.table3=[],this.tableData="",this.searchForm.Start=o(this.value[0]).format("YYYY-MM-DD"),this.searchForm.Stop=o(this.value[1]).format("YYYY-MM-DD");var e="api/Statistics/GetAlarmReport";this.$axios.get(e,{params:this.searchForm}).then((function(e){if(0===e.data.code){t.tableData=e.data.data;for(var a=t.tableData.bATTERY_CLUSTER_INFO.valueUnits,s=0;s<4;s++)t.table1.push({one:a[0+7*s].name,two:a[1+7*s].name,three:a[2+7*s].name,four:a[3+7*s].name,five:a[4+7*s].name,six:a[5+7*s].name,seven:a[6+7*s].name}),t.table1.push({one:a[0+7*s].value+a[0+7*s].unit,two:a[1+7*s].value+a[1+7*s].unit,three:a[2+7*s].value+a[2+7*s].unit,four:a[3+7*s].value+a[3+7*s].unit,five:a[4+7*s].value+a[4+7*s].unit,six:a[5+7*s].value+a[5+7*s].unit,seven:a[6+7*s].value+a[6+7*s].unit});t.tableData.bATTERY_ALARM_TREND.series=[],t.tableData.bATTERY_ALARM_TREND.legend=[],t.tableData.bATTERY_ALARM_TREND.SeriesData.forEach((function(e){t.tableData.bATTERY_ALARM_TREND.legend.push(e.name),t.tableData.bATTERY_ALARM_TREND.series.push({name:e.name,type:"line",stack:e.stack,data:e.data})})),t.tableData.bATTERY_ALARM_STATISTICS.series=[],t.tableData.bATTERY_ALARM_STATISTICS.legend=[],t.tableData.bATTERY_ALARM_STATISTICS.SeriesData.forEach((function(e){t.tableData.bATTERY_ALARM_STATISTICS.legend.push(e.name),t.tableData.bATTERY_ALARM_STATISTICS.series.push({name:e.name,type:"bar",stack:e.stack,data:e.data})})),setTimeout((function(){t.loading=!1}),500),t.$nextTick((function(){t.getEcharts()}))}else 1===e.data.code?(setTimeout((function(){t.loading=!1}),500),t.$message.error(e.data.msg)):setTimeout((function(){t.loading=!1}),500)})).catch((function(t){console.error(t)}))},getDevices:function(){var t=this,e="/api/Devices/GetDevicesNameList";this.$axios.get("".concat(e,"?AutoSystemID=").concat(this.searchForm.AutoSystemID)).then((function(e){0===e.data.code?(t.options=e.data.data,t.searchForm.DeviceSystemID=t.options[0].SystemID,t.getData()):1===e.data.code&&t.$message.error(e.data.msg)})).catch((function(t){console.error(t)}))},goOtherDay:function(t){var e;switch(t){case"yesterday":e=o().subtract(1,"days").format("YYYY-MM-DD");break;case"week":e=o().subtract(1,"weeks").format("YYYY-MM-DD");break;case"month":e=o().subtract(1,"months").format("YYYY-MM-DD");break}this.value=[e,new Date],this.getData()},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===0?"primary-row":""},getEcharts:function(){var t=this.$echarts.init(document.getElementById("myChart1"));t.setOption({title:{text:this.tableData.bATTERY_ALARM_TREND.Name,bottom:0,left:"center"},grid:{left:"25",right:"20",bottom:"40",top:"20%",containLabel:!0},tooltip:{trigger:"axis"},legend:{data:this.tableData.bATTERY_ALARM_TREND.legend,top:"8%",type:"scroll"},xAxis:{type:"category",data:this.tableData.bATTERY_ALARM_TREND.XAxisData},yAxis:{type:"value",min:this.tableData.bATTERY_ALARM_TREND.YAxisMin,max:this.tableData.bATTERY_ALARM_TREND.YAxisMax},series:this.tableData.bATTERY_ALARM_TREND.series});var e=this.$echarts.init(document.getElementById("myChart2"));e.setOption({title:{text:this.tableData.bATTERY_ALARM_STATISTICS.Name,bottom:0,left:"center"},grid:{left:"25",right:"20",bottom:"40",top:"20%",containLabel:!0},tooltip:{trigger:"axis",axiosPointer:{type:"shadow"}},legend:{data:this.tableData.bATTERY_ALARM_STATISTICS.legend,top:"8%",type:"scroll"},xAxis:{type:"category",data:this.tableData.bATTERY_ALARM_STATISTICS.XAxisData},yAxis:{type:"value",min:this.tableData.bATTERY_ALARM_STATISTICS.YAxisMin,max:this.tableData.bATTERY_ALARM_STATISTICS.YAxisMax},series:this.tableData.bATTERY_ALARM_STATISTICS.series}),setTimeout((function(){window.onresize=function(){t.resize(),e.resize()}}),200)}}},r=l,n=(a("bf0d"),a("2877")),c=Object(n["a"])(r,s,i,!1,null,"983204ac",null);e["default"]=c.exports},bf0d:function(t,e,a){"use strict";var s=a("cd6d"),i=a.n(s);i.a},cd6d:function(t,e,a){}}]);
//# sourceMappingURL=StatementAbnormalReport.ad47be6e.js.map