(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["UsersManagement"],{"4fc3":function(e,t,a){"use strict";var o=a("df0e"),s=a.n(o);s.a},5125:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{"box-sizing":"border-box"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户列表查询")])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"账号名称:"}},[a("el-input",{attrs:{placeholder:"请输入账号名称"},model:{value:e.searchForm.LikeUserName,callback:function(t){e.$set(e.searchForm,"LikeUserName",t)},expression:"searchForm.LikeUserName"}})],1),a("el-form-item",{attrs:{label:"手机号码:"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.searchForm.LikePhone,callback:function(t){e.$set(e.searchForm,"LikePhone",t)},expression:"searchForm.LikePhone"}})],1),a("el-form-item",{attrs:{label:"锁定:"}},[a("el-select",{attrs:{clearable:""},model:{value:e.searchForm.LikeLock,callback:function(t){e.$set(e.searchForm,"LikeLock",t)},expression:"searchForm.LikeLock"}},e._l(e.options1,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"黑名单:"}},[a("el-select",{attrs:{clearable:""},model:{value:e.searchForm.LikeBlacklist,callback:function(t){e.$set(e.searchForm,"LikeBlacklist",t)},expression:"searchForm.LikeBlacklist"}},e._l(e.options2,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchForm.page=1,e.getData()}}},[e._v("查询")])],1)],1)],1),a("div",{staticStyle:{height:"20px",width:"100%"}})],1)]),a("el-card",{staticClass:"box-card visible"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户列表")])]),a("vxe-toolbar",{attrs:{custom:"",print:"",export:""},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.addItem}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.deleteItems}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 多选删除 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.getData}},[a("i",{staticClass:"el-icon-refresh-right"}),e._v(" 刷新 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:e.initUserPass}},[a("i",{staticClass:"el-icon-edit-outline"}),e._v(" 初始化密码 ")]),a("el-button",{staticClass:"button-left",attrs:{type:"primary",size:"small"},on:{click:function(t){e.isShow=!e.isShow}}},[a("i",{staticClass:"el-icon-search"}),e._v(" 模糊查询 ")])]},proxy:!0}])}),a("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"xTable",attrs:{data:e.tableData,border:"","export-config":e.exportConfig,"element-loading-background":"rgba(0, 0, 0, 0)","show-overflow":"",resizable:"",align:"center","highlight-hover-row":"","highlight-current-row":""}},[a("vxe-table-column",{attrs:{type:"checkbox",width:"50",fixed:"left"}}),a("vxe-table-column",{attrs:{type:"seq",width:"50",title:"序号",fixed:"left"}}),a("vxe-table-column",{attrs:{field:"AccountNumber",title:"账户",width:"135",sortable:"","show-overflow":"",align:"left"}}),a("vxe-table-column",{attrs:{field:"UserName",title:"名称",width:"100","show-overflow":"",sortable:"",align:"left"}}),a("vxe-table-column",{attrs:{field:"RegistrationTime",title:"注册时间",width:"153",sortable:"","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"ActiveTime",title:"有效时间",width:"153",sortable:"","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"TotalNumberOfLandings",title:"登陆次数",width:"108",sortable:"","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"RecentLandfallIp",title:"上次登陆IP",width:"139",sortable:"","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"RecentLandfallTime",title:"上次登录时间",width:"146",sortable:"","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"IsLock",title:"锁定",width:"100",sortable:"","show-overflow":""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[e._v(" "+e._s("1"===o.IsLock?"是":"否")+" "),a("el-switch",{attrs:{"active-color":"#00A854","active-value":"1","inactive-color":"#F04134","inactive-value":"0"},on:{change:function(t){return e.editStatus(o,"IsLock")}},model:{value:o.IsLock,callback:function(t){e.$set(o,"IsLock",t)},expression:"row.IsLock"}})]}}])}),a("vxe-table-column",{attrs:{field:"IsBlacklist",title:"黑名单",width:"100",sortable:"","show-overflow":""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[e._v(" "+e._s("1"===o.IsBlacklist?"是":"否")+" "),a("el-switch",{attrs:{"active-color":"#00A854","active-value":"1","inactive-color":"#F04134","inactive-value":"0"},on:{change:function(t){return e.editStatus(o,"IsBlacklist")}},model:{value:o.IsBlacklist,callback:function(t){e.$set(o,"IsBlacklist",t)},expression:"row.IsBlacklist"}})]}}])}),a("vxe-table-column",{attrs:{title:"操作",width:"350",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.updataActiveTime(o)}}},[e._v("审核")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.getUserInfo(o)}}},[e._v("详情")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.editItem(o)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteItem(o)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.searchForm.page,"page-sizes":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{width:"35%","close-on-click-modal":!1,visible:e.dialogFormAddVisible,title:"添加用户"},on:{"update:visible":function(t){e.dialogFormAddVisible=t}}},[a("div",{staticStyle:{"max-height":"500px",overflow:"auto"}},[a("el-form",{staticStyle:{position:"relative"},attrs:{"label-width":"90px","label-position":"right",model:e.addForm,inline:!0}},[e.spinShow?a("Spin",{attrs:{fix:""}}):e._e(),a("el-form-item",{attrs:{label:"用户账户"}},[a("el-input",{attrs:{placeholder:"请输入用户账户"},model:{value:e.addForm.AccountNumber,callback:function(t){e.$set(e.addForm,"AccountNumber",t)},expression:"addForm.AccountNumber"}})],1),a("el-form-item",{attrs:{label:"用户姓名"}},[a("el-input",{attrs:{placeholder:"请输入用户姓名"},model:{value:e.addForm.UserName,callback:function(t){e.$set(e.addForm,"UserName",t)},expression:"addForm.UserName"}})],1),a("el-form-item",{attrs:{label:"用户籍贯"}},[a("el-input",{attrs:{placeholder:"请输入用户籍贯"},model:{value:e.addForm.NativePlace,callback:function(t){e.$set(e.addForm,"NativePlace",t)},expression:"addForm.NativePlace"}})],1),a("el-form-item",{attrs:{label:"担任职务"}},[a("el-input",{attrs:{placeholder:"请输入担任职务"},model:{value:e.addForm.InSubordinate,callback:function(t){e.$set(e.addForm,"InSubordinate",t)},expression:"addForm.InSubordinate"}})],1),a("el-form-item",{attrs:{label:"座机号码"}},[a("el-input",{attrs:{placeholder:"请输入座机号码"},model:{value:e.addForm.TelNumber,callback:function(t){e.$set(e.addForm,"TelNumber",t)},expression:"addForm.TelNumber"}})],1),a("el-form-item",{attrs:{label:"所属公司"}},[a("el-input",{attrs:{placeholder:"请输入所属公司"},model:{value:e.addForm.InCompany,callback:function(t){e.$set(e.addForm,"InCompany",t)},expression:"addForm.InCompany"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.addForm.PhoneNumber,callback:function(t){e.$set(e.addForm,"PhoneNumber",t)},expression:"addForm.PhoneNumber"}})],1),a("el-form-item",{attrs:{label:"邮箱地址"}},[a("el-input",{attrs:{placeholder:"请输入邮箱地址"},model:{value:e.addForm.Email,callback:function(t){e.$set(e.addForm,"Email",t)},expression:"addForm.Email"}})],1),a("el-form-item",{attrs:{label:"QQ号码"}},[a("el-input",{attrs:{placeholder:"请输入QQ号码"},model:{value:e.addForm.QqNumber,callback:function(t){e.$set(e.addForm,"QqNumber",t)},expression:"addForm.QqNumber"}})],1),a("el-form-item",{attrs:{label:"微信号码"}},[a("el-input",{attrs:{placeholder:"请输入微信号码"},model:{value:e.addForm.WechatNumber,callback:function(t){e.$set(e.addForm,"WechatNumber",t)},expression:"addForm.WechatNumber"}})],1),a("el-form-item",{attrs:{label:"所属部门"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.DepartmentSystemID,callback:function(t){e.$set(e.addForm,"DepartmentSystemID",t)},expression:"addForm.DepartmentSystemID"}},e._l(e.newDepartment,(function(e){return a("el-option",{key:e.SystemID,attrs:{label:e.Name,value:e.SystemID}})})),1)],1),a("el-form-item",{attrs:{label:"角色"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.RoleSystemID,callback:function(t){e.$set(e.addForm,"RoleSystemID",t)},expression:"addForm.RoleSystemID"}},e._l(e.newProject,(function(e){return a("el-option",{key:e.SystemID,attrs:{label:e.Name,value:e.SystemID}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary",disabled:e.spinShow},on:{click:e.addHttp}},[e._v(" 提 交 ")]),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogFormAddVisible=!1}}},[e._v(" 取 消 ")])],1)]),a("el-dialog",{attrs:{width:"650px","close-on-click-modal":!1,visible:e.dialogFormEditVisible,title:"修改用户"},on:{"update:visible":function(t){e.dialogFormEditVisible=t}}},[a("div",{staticStyle:{"max-height":"500px",overflow:"auto"}},[a("el-form",{staticStyle:{position:"relative"},attrs:{"label-width":"90px","label-position":"right",model:e.editForm,inline:!0}},[e.spinShow1?a("Spin",{attrs:{fix:""}}):e._e(),a("el-form-item",{attrs:{label:"用户账户"}},[a("el-input",{attrs:{placeholder:"请输入用户账户"},model:{value:e.editForm.AccountNumber,callback:function(t){e.$set(e.editForm,"AccountNumber",t)},expression:"editForm.AccountNumber"}})],1),a("el-form-item",{attrs:{label:"用户姓名"}},[a("el-input",{attrs:{placeholder:"请输入用户姓名"},model:{value:e.editForm.UserName,callback:function(t){e.$set(e.editForm,"UserName",t)},expression:"editForm.UserName"}})],1),a("el-form-item",{attrs:{label:"用户籍贯"}},[a("el-input",{attrs:{placeholder:"请输入用户籍贯"},model:{value:e.editForm.NativePlace,callback:function(t){e.$set(e.editForm,"NativePlace",t)},expression:"editForm.NativePlace"}})],1),a("el-form-item",{attrs:{label:"担任职务"}},[a("el-input",{attrs:{placeholder:"请输入担任职务"},model:{value:e.editForm.InSubordinate,callback:function(t){e.$set(e.editForm,"InSubordinate",t)},expression:"editForm.InSubordinate"}})],1),a("el-form-item",{attrs:{label:"座机号码"}},[a("el-input",{attrs:{placeholder:"请输入座机号码"},model:{value:e.editForm.TelNumber,callback:function(t){e.$set(e.editForm,"TelNumber",t)},expression:"editForm.TelNumber"}})],1),a("el-form-item",{attrs:{label:"所属公司"}},[a("el-input",{attrs:{placeholder:"请输入所属公司"},model:{value:e.editForm.InCompany,callback:function(t){e.$set(e.editForm,"InCompany",t)},expression:"editForm.InCompany"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.editForm.PhoneNumber,callback:function(t){e.$set(e.editForm,"PhoneNumber",t)},expression:"editForm.PhoneNumber"}})],1),a("el-form-item",{attrs:{label:"邮箱地址"}},[a("el-input",{attrs:{placeholder:"请输入邮箱地址"},model:{value:e.editForm.Email,callback:function(t){e.$set(e.editForm,"Email",t)},expression:"editForm.Email"}})],1),a("el-form-item",{attrs:{label:"QQ号码"}},[a("el-input",{attrs:{placeholder:"请输入QQ号码"},model:{value:e.editForm.QqNumber,callback:function(t){e.$set(e.editForm,"QqNumber",t)},expression:"editForm.QqNumber"}})],1),a("el-form-item",{attrs:{label:"微信号码"}},[a("el-input",{attrs:{placeholder:"请输入微信号码"},model:{value:e.editForm.WechatNumber,callback:function(t){e.$set(e.editForm,"WechatNumber",t)},expression:"editForm.WechatNumber"}})],1),a("el-form-item",{attrs:{label:"所属部门"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.DepartmentSystemID,callback:function(t){e.$set(e.editForm,"DepartmentSystemID",t)},expression:"editForm.DepartmentSystemID"}},e._l(e.newDepartment,(function(e){return a("el-option",{key:e.SystemID,attrs:{label:e.Name,value:e.SystemID}})})),1)],1),a("el-form-item",{attrs:{label:"角色"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.RoleSystemID,callback:function(t){e.$set(e.editForm,"RoleSystemID",t)},expression:"editForm.RoleSystemID"}},e._l(e.newProject,(function(e){return a("el-option",{key:e.SystemID,attrs:{label:e.Name,value:e.SystemID}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary",disabled:e.spinShow1},on:{click:e.editHttp}},[e._v(" 提 交 ")]),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogFormEditVisible=!1}}},[e._v(" 取 消 ")])],1)]),a("el-dialog",{staticStyle:{"margin-top":"20vh"},attrs:{width:"500px","close-on-click-modal":!1,visible:e.dialogFormCheckVisible,title:"更新有效时间"},on:{"update:visible":function(t){e.dialogFormCheckVisible=t}}},[a("div",{staticClass:"dialog-box",staticStyle:{height:"45px",overflow:"auto"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"有效期"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",clearable:!1},model:{value:e.activeTime,callback:function(t){e.activeTime=t},expression:"activeTime"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.updataActiveTimeHttp}},[e._v("确 定")]),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){e.dialogFormCheckVisible=!1}}},[e._v("取 消")])],1)]),a("Drawer",{attrs:{closable:!1,title:"用户详情",draggable:"",width:"30"},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}},[a("p",{style:e.pStyle},[e._v("用户账号")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.AccountNumber)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("用户名称")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.UserName)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("籍贯")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.NativePlace)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("职务")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.InSubordinate)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("部门")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.InDepartment)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("公司")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.InCompany)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("手机号码")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.PhoneNumber)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("座机号码")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.TelNumber)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("邮箱地址")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.Email)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("QQ号码")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.QqNumber)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("微信号码")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.WechatNumber)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("登录次数")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.TotalNumberOfLandings)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("上次登录IP")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.RecentLandfallIp)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("登录时间")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.RecentLandfallTime)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("注册时间")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.RegistrationTime)+" ")]),a("Divider"),a("p",{style:e.pStyle},[e._v("有效时间")]),a("div",{staticClass:"demo-drawer-profile"},[e._v(" "+e._s(e.activeItem.ActiveTime)+" ")])],1)],1)],1)},s=[],i=a("2f62");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=a("c1df"),m={data:function(){return{searchForm:{AutoSystemID:"",page:1,limit:10,LikeUserName:"",LikePhone:"",LikeLock:"",LikeBlacklist:""},isShow:!0,options1:[{label:"未锁定",value:0},{label:"锁定",value:1}],options2:[{label:"未拉黑",value:0},{label:"拉黑",value:1}],tableData:[],loading:!1,exportConfig:{filename:"export",sheetName:"Sheet1",types:["csv","xlsx"]},count:0,addForm:{ASystemID:"",UserSystemID:"",AccountNumber:"",UserName:"",NativePlace:"",InSubordinate:"",InCompany:"",RoleSystemID:"",DepartmentSystemID:"",PhoneNumber:"",TelNumber:"",Email:"",QqNumber:"",WechatNumber:""},selectedItems:[],editForm:{AccountNumber:"",Email:"",InCompany:"",InSubordinate:"",NativePlace:"",PhoneNumber:"",QqNumber:"",TelNumber:"",UserName:"",UserSystemID:"",WechatNumber:"",RoleSystemID:"",DepartmentSystemID:""},dialogFormEditVisible:!1,dialogFormAddVisible:!1,dialogFormCheckVisible:!1,activeTime:"",activeID:"",activeItem:"",value4:!1,pStyle:{fontSize:"16px",color:"rgba(0,0,0,0.85)",lineHeight:"24px",display:"block",marginBottom:"16px"},spinShow:!1,spinShow1:!1,newDepartment:[],newProject:[]}},computed:l({},Object(i["c"])("table",["pageSize"])),created:function(){this.searchForm.AutoSystemID=localStorage.getItem("AutoSystemID"),this.searchForm.limit=this.pageSize[0],this.getData()},methods:{handleSizeChange:function(e){this.searchForm.limit=e,this.getData()},handleCurrentChange:function(e){this.searchForm.page=e,this.getData()},getData:function(){var e=this;this.loading=!0;var t="/api/Users/GetUsersInfoList";this.$axios.get(t,{params:this.searchForm}).then((function(t){0===t.data.code?(e.tableData=t.data.data,e.count=t.data.count,e.loading=!1):1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))},editStatus:function(e,t){var a=this,o={AutoSystemID:this.searchForm.AutoSystemID,data:[{Status:parseInt(e[t]),SystemID:e.SystemID,Name:e.AccountNumber,Column:t}]},s="/api/Users/EditStatus";this.$axios.post(s,o).then((function(e){0===e.data.code?a.$message.success(e.data.msg):1===e.data.code&&a.$message.error(e.data.msg)})).catch((function(e){console.error(e)}))},addItem:function(){this.dialogFormAddVisible=!0,this.spinShow=!0,this.getDepartmentList(),this.getRoleList()},addHttp:function(){var e=this;this.addForm.ASystemID=this.searchForm.AutoSystemID;var t="/api/Users/AddUser";this.$axios.post(t,this.addForm).then((function(t){0===t.data.code?(e.$message.success(t.data.msg),e.addForm={},e.dialogFormAddVisible=!1):1===t.data.code&&e.$message.error(t.data.msg),e.getData()})).catch((function(e){console.error(e)}))},deleteItem:function(e){var t=this;console.log(e);var a="/api/Users/DeleteUsers",o={AutoSystemID:this.searchForm.AutoSystemID,UserSystemIDList:e.SystemID};this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.get(a,{params:o}).then((function(e){0===e.data.code||1===e.data.code&&t.$message.error(e.data.msg),setTimeout((function(){t.$message.success("删除成功");var e=Math.ceil((t.count-1)/t.searchForm.limit),a=t.searchForm.page>e?e:t.searchForm.page;t.searchForm.page=a<1?1:a,t.getData()}),100)})).catch((function(e){console.error(e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},deleteItems:function(){var e=this;this.selectedItems=this.$refs.xTable.getCheckboxRecords();var t="";if(0===this.selectedItems.length)return this.$message.warning("请选择要删除的用户"),!1;this.selectedItems.map((function(a,o){o===e.selectedItems.length-1?t+=a.SystemID:t=t+a.SystemID+","})),this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a="/api/Users/DeleteUsers";e.$axios.get(a,{params:{AutoSystemID:e.searchForm.AutoSystemID,UserSystemIDList:t}}).then((function(t){0===t.data.code||1===t.data.code&&e.$message.error(t.data.msg),e.$message.success("删除成功");var a=Math.ceil((e.count-e.selectedItems.length)/e.searchForm.limit),o=e.searchForm.page>a?a:e.searchForm.page;e.searchForm.page=o<1?1:o,e.getData()})).catch((function(e){console.error(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},getUserInfo:function(e){var t=this,a=e.SystemID,o="/api/Users/GetUserInfo";this.$axios.get("".concat(o,"?AutoSystemID=").concat(this.searchForm.AutoSystemID,"&UserSystemID=").concat(a)).then((function(e){0===e.data.code?(t.activeItem=e.data.data[0],t.value4=!0):1===e.data.code&&t.$message.error(e.data.msg)})).catch((function(e){console.error(e)}))},editItem:function(e){var t=this;this.dialogFormEditVisible=!0,this.spinShow1=!0;var a="/api/Users/GetUserInfo";this.$axios.get(a,{params:{AutoSystemID:this.searchForm.AutoSystemID,UserSystemID:e.SystemID}}).then((function(a){if(0===a.data.code){var o=a.data.data[0];t.editForm={AccountNumber:o.AccountNumber,Email:o.Email,InCompany:o.InCompany,InSubordinate:o.InSubordinate,NativePlace:o.NativePlace,PhoneNumber:o.PhoneNumber,QqNumber:o.QqNumber,TelNumber:o.TelNumber,UserName:o.UserName,UserSystemID:e.SystemID,WechatNumber:o.WechatNumber,DepartmentSystemID:o.DepartmentSystemID,RoleSystemID:o.RoleSystemID}}else 1===a.data.code&&t.$message.error(a.data.msg)})).catch((function(e){console.error(e)})),this.getDepartmentList(),this.getRoleList()},editHttp:function(){var e=this,t={AutoSystemID:this.searchForm.AutoSystemID,UserInfo:this.editForm},a="/api/Users/EditUser";this.$axios.post(a,t).then((function(t){0===t.data.code?(e.$message.success(t.data.msg),e.editForm={},e.dialogFormEditVisible=!1):1===t.data.code&&e.$message.error(t.data.msg),setTimeout((function(){e.getData()}),500)})).catch((function(e){console.error(e)}))},initUserPass:function(){var e=this;this.selectedItems=this.$refs.xTable.getCheckboxRecords();var t="";if(0===this.selectedItems.length)return this.$message.warning("至少选择一个用户"),!1;this.selectedItems.map((function(a,o){o===e.selectedItems.length-1?t+=a.SystemID:t=t+a.SystemID+","})),this.$confirm("确定要初始化密码吗? 初始化密码将为123456！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a="/api/Users/InitUserPass";e.$axios.get(a,{params:{AutoSystemID:e.searchForm.AutoSystemID,UserSystemIDList:t}}).then((function(t){0===t.data.code?(e.$message.success(t.data.msg),e.getData()):1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))})).catch((function(){e.$message({type:"info",message:"已取消初始化"})}))},updataActiveTime:function(e){console.log(e),this.activeID=e.SystemID,this.activeTime=e.ActiveTime,this.dialogFormCheckVisible=!0},updataActiveTimeHttp:function(){var e=this,t="/api/Users/UpdataActiveTime";this.$axios.post(t,{AutoSystemID:this.searchForm.AutoSystemID,SystemID:this.activeID,ActiveTime:c(this.activeTime).format("YYYY-MM-DDTHH:mm:ss")}).then((function(t){0===t.data.code?(e.$message.success(t.data.msg),e.activeTime="",e.dialogFormCheckVisible=!1):1===t.data.code&&e.$message.error(t.data.msg),e.getData()})).catch((function(e){console.error(e)}))},getDepartmentList:function(){var e=this,t="/api/Project/GetDepartmentList";this.$axios.get("".concat(t,"?AutoSystemID=").concat(this.searchForm.AutoSystemID)).then((function(t){0===t.data.code?e.newDepartment=t.data.data:1===t.data.code&&e.$message.error(t.data.msg)})).catch((function(e){console.error(e)}))},getRoleList:function(){var e=this,t="/api/Project/GetRoleList";this.$axios.get("".concat(t,"?AutoSystemID=").concat(this.searchForm.AutoSystemID)).then((function(t){0===t.data.code?e.newProject=t.data.data:1===t.data.code&&e.$message.error(t.data.msg),setTimeout((function(){e.spinShow=!1,e.spinShow1=!1}),500)})).catch((function(e){console.error(e)}))}}},d=m,u=(a("4fc3"),a("2877")),p=Object(u["a"])(d,o,s,!1,null,"56228d48",null);t["default"]=p.exports},df0e:function(e,t,a){}}]);
//# sourceMappingURL=UsersManagement.75ba8f3b.js.map